<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ApiDataReference</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>

<body>
    <input type='text' id='searchQuery'>
    <input type='submit' onclick='data()'>

    <script>
        function data() {
            var searchQuery = document.getElementById('searchQuery').value;
            //console.log(searchQuery);

            var url = 'https://tih-api.stb.gov.sg/content/v1/food-beverages/search?keyword=' + searchQuery + '&language=en&apikey=e8o8lSAcpTGJx0xnGiUDzfyZ7ksA29F8';
            // var url = 'https://tih-api.stb.gov.sg/content/v1/food-beverages/search?keyword=chinese&language=en&apikey=e8o8lSAcpTGJx0xnGiUDzfyZ7ksA29F8'

            axios.get(url)
                .then(response => {
                    // console.log(response.data);
                    var dataArr = response.data.data;

                    // for(var restaurant of dataArr){    // if we wanna do a loop, but for simplicity's sake im just using the first result
                    // }

                    // Math.floor(Math.random() * 10);
                    var restaurant = dataArr[0]
                    // ADDRESS DATA
                    postalCode= restaurant.address.postalCode;
                    block = restaurant.address.block;
                    buildingName = restaurant.address.buildingName;
                    floorNumber = restaurant.address.floorNumber;
                    streetName = restaurant.address.streetName;
                    unitNumber = restaurant.address.unitNumber;
                    openTime = restaurant.businessHour[0].openTime;
                    closeTime = restaurant.businessHour[0].closeTime;
                    primaryContactNo = restaurant.contact.primaryContactNo
                    secondaryContactNo = restaurant.contact.secondaryContactNo

                    // REVIEW DATA
                    reviewauthorName = restaurant.reviews[0].authorName
                    reviewprofilePhoto = restaurant.reviews[0].profilePhoto
                    reviewrating = restaurant.reviews[0].rating
                    reviewtext = restaurant.reviews[0].text
                    reviewtime = restaurant.reviews[0].time
                    reviewtime = restaurant.reviews[0].time.slice(0,10)
                    reviewdate = restaurant.reviews[0].time.slice(11,-1)
                    reviewdatetime = restaurant.reviews[0].time.slice(0,10) + "   " + restaurant.reviews[0].time.slice(11,-1)

                    // RESTAURANT DESCRIPTION DATA
                    name = restaurant.name
                    description = restaurant.body;
                    officialWebsite = restaurant.officialWebsite
                    officialEmail = restaurant.officialEmail
                    rating = restaurant.rating
                    temporarilyClosed = restaurant.temporarilyClosed

                    // Location Information
                    longitude = restaurant.location.longitude
                    latitude = restaurant.location.latitude
                    nearestMrtStation = restaurant.nearestMrtStation

                    console.log("postalCode: ",postalCode)
                    console.log("block: ",block)
                    console.log("buildingName: ", buildingName)
                    console.log("floorNumber: ",floorNumber)
                    console.log("streetName: ",streetName)
                    console.log("unitNumber: ",unitNumber)
                    console.log("openTime: ", openTime)
                    console.log("closeTime: ", closeTime)
                    console.log("primaryContactNo: ", primaryContactNo)
                    console.log("secondaryContactNo: ", secondaryContactNo)

                    console.log("review1authorName: ", reviewauthorName)
                    console.log("review1profilePhoto: ", reviewprofilePhoto)
                    console.log("review1rating: ", reviewrating)
                    console.log("review1text: ", reviewtext)
                    console.log("review1time: ", reviewtime)
                    console.log("review1date: ", reviewdate)
                    console.log("review1datetime: ", reviewdatetime)

                    console.log("name: ", name)
                    console.log("description: ",description)
                    console.log("officialWebsite: ", officialWebsite)
                    console.log("officialEmail: ", officialEmail)
                    console.log("rating: ", rating)
                    console.log("temporarilyClosed: ", temporarilyClosed)

                    console.log("longtitude: ", longitude)
                    console.log("latitude: ", latitude)
                    console.log("nearestMrtStation: ", nearestMrtStation)

                })
                .catch(error => {
                    console.log(error.message)
                })
        }

    </script>
</body>

</html>